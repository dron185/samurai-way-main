"use strict";(self.webpackChunksamurai_way=self.webpackChunksamurai_way||[]).push([[759],{6759:function(s,e,t){t.r(e),t.d(e,{ProfileContainer:function(){return K},default:function(){return W}});var i=t(8683),o=t(5671),n=t(3144),r=t(136),a=t(5716),l=t(2791),c="Profile_profile__F6H+d",u=t(885),d="ProfileInfo_profileInfo__gp86+",p="ProfileInfo_descriptionBlock__BdY2B",f="ProfileInfo_photoContainer__DNbS4",h="ProfileInfo_mainPhoto__LRHSO",m="ProfileInfo_contact__C09Gp",x="ProfileInfo_data__SnZBI",j=t(2995),v=t(184),_=function(s){var e=(0,l.useState)(!1),t=(0,u.Z)(e,2),i=t[0],o=t[1],n=(0,l.useState)(s.status),r=(0,u.Z)(n,2),a=r[0],c=r[1];(0,l.useEffect)((function(){c(s.status)}),[s.status]);return(0,v.jsxs)("div",{children:[!i&&(0,v.jsxs)("div",{children:[(0,v.jsx)("b",{children:"Status: "}),(0,v.jsx)("span",{onDoubleClick:function(){o(!0)},children:s.status||"-----"})]}),i&&(0,v.jsx)("div",{children:(0,v.jsx)("input",{onChange:function(s){c(s.currentTarget.value)},onBlur:function(){o(!1),s.updateStatus(a)},value:a,autoFocus:!0})})]})},P=t(4354),g=t(1117),b=t(3079),k=t(6139),N=t(704),y="ProfileDataForm_contact__ucZrs",S=t(9234),C=(0,N.Z)({form:"edit-profile"})((function(s){s.initialValues;var e=s.profile,t=s.handleSubmit,i=s.error;return(0,v.jsxs)("form",{onSubmit:t,children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("button",{type:"submit",children:"save"}),i]}),i&&(0,v.jsx)("div",{className:S.Z.formSummaryError,children:i}),(0,v.jsxs)("div",{children:[(0,v.jsx)("b",{children:"Full name"}),": ",(0,v.jsx)(k.Z,{placeholder:"Full name",validate:[b.C],name:"fullName",component:g.II})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("div",{children:"Looking for a job:"}),(0,v.jsx)(k.Z,{type:"checkbox",name:"lookingForAJob",component:g.II})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("b",{children:"My professional skills"}),":",(0,v.jsx)(k.Z,{component:g.gx,validate:[(0,b.D)(50)],name:"lookingForAJobDescription",placeholder:"My professional skills"})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("b",{children:"About me"}),":",(0,v.jsx)(k.Z,{component:g.gx,validate:[(0,b.D)(50)],name:"aboutMe",placeholder:"About me"})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("span",{children:"Contacts:"})," ",Object.keys(e.contacts).map((function(s){return(0,v.jsxs)("div",{className:y,children:[(0,v.jsx)("b",{children:s}),": ",(0,v.jsx)(k.Z,{placeholder:s,validate:[(0,b.D)(50)],name:"contacts."+s,component:g.II})]},s)}))]})]})})),I=function(s){var e=s.profile,t=s.isOwner,i=s.goToEditMode;return(0,v.jsxs)("div",{className:x,children:[t&&(0,v.jsx)("div",{children:(0,v.jsx)("button",{onClick:i,children:"edit"})}),(0,v.jsxs)("div",{children:[(0,v.jsx)("span",{children:"Full name:"})," ",e.fullName]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("span",{children:"Looking for a job:"})," ",e.lookingForAJob?"yes":"no"]}),e.lookingForAJob&&(0,v.jsxs)("div",{children:[(0,v.jsx)("span",{children:"My professional skills:"})," ",e.lookingForAJobDescription]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("span",{children:"About me:"})," ",e.aboutMe]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("span",{children:"Contacts:"})," ",Object.keys(e.contacts).map((function(s){return(0,v.jsx)(Z,{contactTitle:s,contactValue:e.contacts[s]},s)}))]})]})},Z=function(s){var e=s.contactTitle,t=s.contactValue;return(0,v.jsxs)("div",{className:m,children:[(0,v.jsxs)("span",{children:[e,":"]})," ",t]})},w=function(s){var e=(0,l.useState)(!1),t=(0,u.Z)(e,2),i=t[0],o=t[1];if(!s.profile)return(0,v.jsx)(j.p,{});return(0,v.jsx)("div",{className:d,children:(0,v.jsxs)("div",{className:p,children:[(0,v.jsxs)("div",{className:f,children:[(0,v.jsx)("img",{src:s.profile.photos.large||P,alt:"avatar",className:h}),s.isOwner&&(0,v.jsx)("input",{type:"file",onChange:function(e){e.target.files&&e.target.files.length&&s.savePhoto(e.target.files[0])}}),(0,v.jsx)(_,{status:s.status,updateStatus:s.updateStatus})]}),i?(0,v.jsx)(C,{initialValues:s.profile,profile:s.profile,onSubmit:function(e){s.saveProfile(e),o(!1)}}):(0,v.jsx)(I,{profile:s.profile,isOwner:s.isOwner,goToEditMode:function(){o(!0)}})]})})},M=t(364),D="MyPosts_postsBlock__nmRx3",O="MyPosts_postsTitle__yUp3G",A="MyPosts_postWrapper__Na3HO",F="MyPosts_posts__KwDaJ",T="Post_item__rqBl2",B=function(s){return(0,v.jsxs)("div",{className:T,children:[(0,v.jsx)("img",{src:"https://i.pinimg.com/564x/1e/d3/0d/1ed30d98f49be532ae58c62f33677b16.jpg",alt:"avatar"}),s.message,(0,v.jsxs)("div",{children:[(0,v.jsx)("span",{children:"like"})," ",s.likesCount]})]})},U=(0,b.D)(10),J=(0,N.Z)({form:"ProfileAddNewPostForm"})((function(s){return(0,v.jsxs)("form",{className:A,onSubmit:s.handleSubmit,children:[(0,v.jsx)("div",{children:(0,v.jsx)(k.Z,{name:"newPostText",component:g.gx,validate:[b.C,U],placeholder:"Post message"})}),(0,v.jsx)("div",{children:(0,v.jsx)("button",{children:"Add post"})})]})})),E=(0,l.memo)((function(s){var e=s.posts.map((function(s){return(0,v.jsx)(B,{message:s.message,likesCount:s.likesCount},s.id)}));return(0,v.jsxs)("div",{className:D,children:[(0,v.jsx)("h3",{className:O,children:"My posts"}),(0,v.jsx)(J,{onSubmit:function(e){s.addNewPost(e.newPostText)}}),(0,v.jsx)("div",{className:F,children:e})]})})),G=t(81),V=(0,M.$j)((function(s){return{posts:s.profilePage.posts}}),(function(s){return{addNewPost:function(e){s((0,G.Pi)(e))}}}))(E),H=function(s){return(0,v.jsxs)("div",{className:c,children:[(0,v.jsx)(w,{profile:s.profile,status:s.status,updateStatus:s.updateStatus,isOwner:s.isOwner,savePhoto:s.savePhoto,saveProfile:s.saveProfile}),(0,v.jsx)(V,{})]})},L=t(9271),$=t(7781),q="ProfileContainer_profileContainer__DOv-C",z="ProfileContainer_profilePhoto__PBbxt",R=t(986),K=function(s){(0,r.Z)(t,s);var e=(0,a.Z)(t);function t(){return(0,o.Z)(this,t),e.apply(this,arguments)}return(0,n.Z)(t,[{key:"refreshProfile",value:function(){var s=Number(this.props.match.params.userId);s||(s=this.props.authorizedUserId)||this.props.history.push("/login"),this.props.getUserProfile(s),this.props.getUserStatus(s)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(s,e){this.props.match.params.userId!==s.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return(0,v.jsxs)("div",{className:q,children:[(0,v.jsx)("div",{className:z,children:(0,v.jsx)("img",{src:R,alt:"Photo"})}),(0,v.jsx)(H,(0,i.Z)((0,i.Z)({},this.props),{},{profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,isOwner:!this.props.match.params.userId,savePhoto:this.props.savePhoto}))]})}}]),t}(l.Component),W=(0,$.qC)((0,M.$j)((function(s){return{profile:s.profilePage.profile,status:s.profilePage.status,authorizedUserId:s.auth.id,isAuth:s.auth.isAuth}}),{getUserProfile:G.d$,getUserStatus:G.GP,updateStatus:G.OG,savePhoto:G.Tw,saveProfile:G.Ms}),L.EN)(K)},986:function(s,e,t){s.exports=t.p+"static/media/leaves-1350175_1920.07521196d3c709d0ecfc.jpg"}}]);
//# sourceMappingURL=759.04b60607.chunk.js.map